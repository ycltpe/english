# VitePress 配置说明

## 自动化导航配置

本项目的 VitePress 配置采用了自动化的方式生成导航菜单和侧边栏，支持无限级目录结构，无需手动维护。

### 功能特性

1. **自动导航菜单生成**
   - 自动扫描 `docs` 目录下的所有子目录（支持无限级嵌套）
   - 从 `index.md` 文件中提取标题作为导航名称
   - 如果没有 `index.md`，则从第一个 markdown 文件提取标题
   - 支持中文目录名映射
   - **自定义排序**：支持通过配置自定义栏目显示顺序

2. **自动侧边栏生成**
   - 为每个目录自动生成侧边栏配置（支持多级分组）
   - 递归扫描目录下的所有 markdown 文件
   - 从文件内容中提取标题
   - 自动生成正确的链接路径
   - 支持子目录分组显示
   - **排序支持**：侧边栏也按照自定义顺序排列

3. **回到顶部功能**
   - 自动显示/隐藏：当页面滚动超过300px时显示
   - 平滑滚动：点击后平滑滚动到页面顶部
   - 响应式设计：在移动端和桌面端都有良好的显示效果
   - 主题适配：自动适配深色/浅色主题
   - 无障碍支持：包含适当的aria-label属性

4. **智能错误处理**
   - 包含完整的错误处理机制
   - 提供详细的日志输出
   - 优雅降级处理

### 使用方法

#### 添加新页面

1. 在相应的目录下创建 markdown 文件
2. 确保文件以 `# 标题` 开头
3. 重启开发服务器，导航会自动更新

#### 添加新目录

1. 在 `docs` 目录下创建新目录（支持多级嵌套）
2. 创建 `index.md` 文件作为目录入口
3. 在 `getDisplayName` 函数中添加目录名映射（可选）

#### 添加子目录

1. 在任何现有目录下创建子目录
2. 子目录会自动在侧边栏中显示为分组
3. 支持无限级嵌套，每级都会正确显示

#### 目录名映射

在 `getDisplayName` 函数中可以自定义目录的显示名称：

```javascript
function getDisplayName(dirName) {
  const nameMap = {
    'guide': '学习规划',
    'grammar': '语法基础',
    'vocabulary': '词汇积累',
    'listening-speaking': '听说训练',
    'reading-writing': '阅读写作',
    'resources': '学习资源'
  }
  return nameMap[dirName] || dirName
}
```

#### 栏目排序配置

在 `getDirectoryOrder` 函数中可以自定义栏目的显示顺序：

```javascript
function getDirectoryOrder(dirName) {
  const orderMap = {
    'guide': 1,           // 学习规划 - 第一
    'grammar': 2,         // 语法基础 - 第二
    'vocabulary': 3,      // 词汇积累 - 第三
    'listening-speaking': 4, // 听说训练 - 第四
    'reading-writing': 5, // 阅读写作 - 第五
    'resources': 6        // 学习资源 - 最后
  }
  return orderMap[dirName] || 999 // 未配置的目录排在最后
}
```

数字越小，排序越靠前。未配置的目录会排在最后（权重999）。

### 文件结构要求

```
docs/
├── .vitepress/
│   └── config.js          # 配置文件
├── guide/
│   ├── index.md           # 目录入口页面
│   ├── plan.md            # 其他页面
│   └── subcategory/       # 子目录
│       ├── index.md       # 子目录入口页面
│       └── page.md        # 子目录页面
├── grammar/
│   ├── index.md
│   ├── basic/             # 多级子目录
│   │   ├── index.md
│   │   └── sentence-structure.md
│   └── advanced/
│       ├── index.md
│       └── clauses.md
└── ...
```

### 注意事项

1. **文件命名**: 确保 markdown 文件以 `# 标题` 开头
2. **目录结构**: 每个目录建议包含 `index.md` 作为入口页面
3. **中文支持**: 支持中文文件名和标题
4. **错误处理**: 如果文件读取失败，会使用默认名称
5. **多级目录**: 支持无限级嵌套，每级都会在侧边栏中正确显示
6. **排序规则**: 目录优先于文件，同类型按名称排序
7. **回到顶部**: 功能自动启用，无需额外配置
8. **栏目排序**: 通过 `getDirectoryOrder` 函数自定义排序

### 开发调试

启动开发服务器时会显示详细的日志信息：

```bash
npm run docs:dev
```

日志会显示：
- 发现的目录列表
- 每个目录的标题提取结果
- 生成的导航菜单
- 侧边栏配置信息

### 优势

相比手动配置，自动化配置具有以下优势：

1. **维护简单**: 无需手动更新配置文件
2. **减少错误**: 避免手动配置导致的链接错误
3. **一致性**: 确保导航和侧边栏的一致性
4. **扩展性**: 添加新页面时自动更新
5. **可读性**: 代码结构清晰，易于理解和维护
